# .pre-commit-config.yaml
#
# This configuration defines the pre-commit hooks for the 'thisorthat' monorepo.
# It includes hooks for both Python (backend) and JavaScript/TypeScript (frontend) files.
#
# To install:
# 1. Ensure you have 'uv' installed and a virtual environment activated in `backend/`.
# 2. Run `uv pip install pre-commit ruff` (from within `backend/` with venv active).
# 3. Ensure frontend dev dependencies like 'prettier' and 'eslint' are installed in `frontend/`.
# 4. From the project root, run `pre-commit install`.

repos:
# == General Hooks ==
# These hooks run on various file types across the entire repository.
-   repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.6.0 # Use the latest stable revision
    hooks:
    -   id: check-yaml # Checks yaml files for syntax errors.
    -   id: end-of-file-fixer # Ensures files end with a newline.
    -   id: trailing-whitespace # Trims trailing whitespace.
    -   id: check-added-large-files # Prevents committing large files.

# == Python Hooks (for the 'backend/' directory) ==
# These hooks use Ruff for linting and formatting Python files.
-   repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.4.4 # Use the latest stable revision
    hooks:
    -   id: ruff  # Linter: checks for style violations and potential errors.
        args: [--fix] # Automatically fixes issues when possible.
        files: ^backend/.*\.py$ # Only run on Python files in the backend directory.
    -   id: ruff-format # Formatter: ensures consistent code style.
        files: ^backend/.*\.py$ # Only run on Python files in the backend directory.

# == JavaScript/TypeScript Hooks (for the 'frontend/' directory) ==
# These hooks use Prettier for formatting and ESLint for linting JS/TS files.
# Prettier and ESLint must be listed as dev dependencies in frontend/package.json.
-   repo: https://github.com/pre-commit/mirrors-prettier
    rev: v3.1.0 # Use the latest stable revision
    hooks:
    -   id: prettier
        # Run prettier on all supported file types in the frontend directory.
        files: ^frontend/ # Target files exclusively within the frontend directory.
        types: [javascript, jsx, ts, tsx, css, html, json, yaml, markdown]
        # You may need to specify language_version for specific versions of Node.js/npm.

-   repo: https://github.com/pre-commit/mirrors-eslint
    rev: v8.56.0 # A known stable version
    hooks:
    -   id: eslint
        # Run eslint only on relevant files in the frontend/src directory.
        files: ^frontend/src/.*\.(js|jsx|ts|tsx)$ # Target specific JS/TS files within frontend/src.
        args: [--fix] # Automatically fixes issues when possible.
        # If your ESLint configuration uses specific plugins that aren't globally
        # available or resolved by default, you might need to add them here.
        # Example for React and TypeScript:
        # additional_dependencies:
        #   - "eslint-plugin-react@latest"
        #   - "@typescript-eslint/eslint-plugin@latest"
        #   - "@typescript-eslint/parser@latest"
